{"ast":null,"code":"var _jsxFileName = \"/Users/qorka/Projects/covid/ui/src/components/compc.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Group } from '@vx/group';\nimport { Pie } from '@vx/shape';\nimport { GradientSteelPurple } from '@vx/gradient';\nimport { scaleBand, scaleLinear } from '@vx/scale';\n\nfunction Compc() {\n  const [data, setData] = useState([]);\n\n  function Label({\n    x,\n    y,\n    children\n  }) {\n    if (children == \"75\") {\n      children = \"75+\";\n    }\n\n    return /*#__PURE__*/React.createElement(\"text\", {\n      fontFamily: \"Snoopy\",\n      fill: \"white\",\n      textAnchor: \"middle\",\n      x: x,\n      y: y,\n      dy: \".33em\",\n      fontSize: 15,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 7\n      }\n    }, children);\n  }\n\n  useEffect(() => {\n    (async () => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/by-age.csv');\n      let res = await a.data;\n      let dump = [],\n          lines = res.split('\\r'),\n          headers = lines[0].split(',');\n\n      for (let i = 1; i < lines.length; i++) {\n        let obj = {},\n            line = lines[i].replace('\\n', ''),\n            curLine = line.split(',');\n\n        if (curLine[0].match(/Citywide\\s\\S+/gi)) {\n          continue;\n        }\n\n        for (var j = 0; j < headers.length; j++) {\n          obj[headers[j].toLowerCase()] = curLine[j].replace(/[\\sA-Za-z]/gi, '');\n        }\n\n        dump.push(obj);\n      }\n\n      setData(dump);\n      console.log(dump);\n    })();\n  }, []);\n  const height = 400,\n        width = 600,\n        radius = Math.min(width, height);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GradientSteelPurple, {\n    id: \"gradient\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    fill: \"#fbc2eb\",\n    rx: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Group, {\n    top: height / 2,\n    left: width / 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Pie, {\n    centroid: (centroid, arc) => {\n      const [x, y] = centroid;\n      return /*#__PURE__*/React.createElement(Label, {\n        x: x,\n        y: y,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, arc.data.age_group);\n    },\n    data: data,\n    outerRadius: radius - 125,\n    pieValue: d => d.covid_case_rate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default Compc;","map":{"version":3,"sources":["/Users/qorka/Projects/covid/ui/src/components/compc.js"],"names":["React","useEffect","useState","axios","Group","Pie","GradientSteelPurple","scaleBand","scaleLinear","Compc","data","setData","Label","x","y","children","a","get","res","dump","lines","split","headers","i","length","obj","line","replace","curLine","match","j","toLowerCase","push","console","log","height","width","radius","Math","min","centroid","arc","age_group","d","covid_case_rate"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Group } from '@vx/group'\nimport { Pie } from '@vx/shape'\nimport { GradientSteelPurple } from '@vx/gradient'\nimport { scaleBand, scaleLinear } from '@vx/scale'\n\nfunction Compc() {\n  const [data, setData] = useState([])\n  function Label({ x, y, children }) {\n    if (children == \"75\") { children = \"75+\" }\n\n    return (\n      <text\n        fontFamily={\"Snoopy\"}\n        fill=\"white\"\n        textAnchor=\"middle\"\n        x={x}\n        y={y}\n        dy=\".33em\"\n        fontSize={15}\n      >\n        {children}\n      </text>\n    )\n  }\n\n  useEffect(() => {\n    (async() => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/by-age.csv')\n      let res = await a.data\n\n      let \n        dump = [],\n        lines = res.split('\\r'),\n        headers = lines[0].split(',')\n    \n      for (let i = 1; i < lines.length; i++) {\n        let \n          obj = {},\n          line = lines[i].replace('\\n', ''),\n          curLine = line.split(',')\n\n        if (curLine[0].match(/Citywide\\s\\S+/gi)) { continue }\n    \n        for (var j = 0; j < headers.length; j++) {\n          obj[headers[j].toLowerCase()] = curLine[j].replace(/[\\sA-Za-z]/gi, '')\n        }\n    \n        dump.push(obj)\n      }\n\n      setData(dump)\n      console.log(dump)\n    })()\n  }, [])\n\n  const \n    height = 400,\n    width = 600,\n    radius = Math.min(width, height)\n\n  return (\n    <>\n      <svg width={width} height={height}>\n        <GradientSteelPurple id=\"gradient\" />\n        <rect width={width} height={height} fill=\"#fbc2eb\" rx={14} />\n        <Group top={height / 2} left={width / 2}>\n          <Pie\n            centroid={(centroid, arc) => {\n              const [x, y] = centroid\n              return (\n                <Label x={x} y={y}>\n                  {arc.data.age_group}\n                </Label>\n              )\n            }}\n            data={data}\n            outerRadius={radius - 125}\n            pieValue={d => d.covid_case_rate}\n          />\n        </Group>\n      </svg>\n    </>\n  )\n}\n\nexport default Compc\n"]},"metadata":{},"sourceType":"module"}