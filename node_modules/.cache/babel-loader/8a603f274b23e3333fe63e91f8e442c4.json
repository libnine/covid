{"ast":null,"code":"var _jsxFileName = \"/Users/qorka/Projects/covid/ui/src/components/compb.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Bar } from '@vx/shape';\nimport { Group } from '@vx/group';\nimport { GradientTealBlue } from '@vx/gradient';\nimport { scaleBand, scaleLinear } from '@vx/scale';\n\nfunction Compb() {\n  const [data, setData] = useState();\n  useEffect(() => {\n    (async () => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/boro.csv');\n      let res = await a.data;\n      let dump = [];\n      let lines = res.split('\\r');\n      let headers = lines[0].split(',');\n\n      for (let i = 1; i < lines.length; i++) {\n        let obj = {};\n        let line = lines[i].replace('\\n', '');\n        let curLine = line.split(',');\n\n        for (var j = 0; j < headers.length; j++) {\n          obj[headers[j].toLowerCase()] = curLine[j];\n        }\n\n        dump.push(obj);\n      }\n\n      setData(dump);\n    })();\n  }, []);\n  const xMax = width;\n  const yMax = height - 120;\n  const xScale = scaleBand({\n    rangeRound: [0, xMax],\n    domain: data.map(x),\n    padding: 0.4\n  });\n  const yScale = scaleLinear({\n    rangeRound: [yMax, 0],\n    domain: [0, Math.max(...data.map(y))]\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GradientTealBlue, {\n    id: \"teal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    fill: \"url(#teal)\",\n    rx: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Group, {\n    top: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, data.map((d, i) => {\n    const letter = x(d);\n    const barWidth = xScale.bandwidth();\n    const barHeight = yMax - yScale(y(d));\n    const barX = xScale(letter);\n    const barY = yMax - barHeight;\n    return /*#__PURE__*/React.createElement(Bar, {\n      key: `bar-${letter}`,\n      x: barX,\n      y: barY,\n      width: barWidth,\n      height: barHeight,\n      fill: \"rgba(23, 233, 217, .5)\",\n      onClick: event => {\n        alert(`clicked: ${JSON.stringify(Object.values(d))}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }\n    });\n  }))));\n}\n\nexport default Compb;","map":{"version":3,"sources":["/Users/qorka/Projects/covid/ui/src/components/compb.js"],"names":["React","useEffect","useState","axios","Bar","Group","GradientTealBlue","scaleBand","scaleLinear","Compb","data","setData","a","get","res","dump","lines","split","headers","i","length","obj","line","replace","curLine","j","toLowerCase","push","xMax","width","yMax","height","xScale","rangeRound","domain","map","x","padding","yScale","Math","max","y","d","letter","barWidth","bandwidth","barHeight","barX","barY","event","alert","JSON","stringify","Object","values"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Bar } from '@vx/shape';\nimport { Group } from '@vx/group';\nimport { GradientTealBlue } from '@vx/gradient';\nimport { scaleBand, scaleLinear } from '@vx/scale';\n\nfunction Compb() {\n  const [data, setData] = useState()\n\n  useEffect(() => {\n    (async() => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/boro.csv')\n      let res = await a.data\n\n      let dump = []\n      let lines = res.split('\\r')    \n      let headers = lines[0].split(',')\n    \n      for (let i = 1; i < lines.length; i++) {\n        let obj = {}\n        let line = lines[i].replace('\\n', '')\n        let curLine = line.split(',')\n    \n        for (var j = 0; j < headers.length; j++) {\n          obj[headers[j].toLowerCase()] = curLine[j]\n        }\n    \n        dump.push(obj)\n      }\n\n      setData(dump)\n    })()\n  }, [])\n\n  const xMax = width;\n  const yMax = height - 120;\n\n  const xScale = scaleBand({\n    rangeRound: [0, xMax],\n    domain: data.map(x),\n    padding: 0.4\n  });\n  const yScale = scaleLinear({\n    rangeRound: [yMax, 0],\n    domain: [0, Math.max(...data.map(y))]\n  });\n\n  return (\n    <>\n      <svg width={width} height={height}>\n        <GradientTealBlue id=\"teal\" />\n        <rect width={width} height={height} fill={\"url(#teal)\"} rx={14} />\n        <Group top={40}>\n          {data.map((d, i) => {\n            const letter = x(d);\n            const barWidth = xScale.bandwidth();\n            const barHeight = yMax - yScale(y(d));\n            const barX = xScale(letter);\n            const barY = yMax - barHeight;\n            return (\n              <Bar\n                key={`bar-${letter}`}\n                x={barX}\n                y={barY}\n                width={barWidth}\n                height={barHeight}\n                fill=\"rgba(23, 233, 217, .5)\"\n                onClick={event => {\n                  alert(`clicked: ${JSON.stringify(Object.values(d))}`);\n                }}\n              />\n            );\n          })}\n        </Group>\n      </svg>\n    </>\n  )\n}\n\nexport default Compb\n"]},"metadata":{},"sourceType":"module"}