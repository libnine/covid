{"ast":null,"code":"import _pt from \"prop-types\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport React from 'react';\nimport reduceCSSCalc from 'reduce-css-calc';\nimport getStringWidth from './util/getStringWidth';\nvar SVG_STYLE = {\n  overflow: 'visible'\n};\n\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\nvar Text = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Text, _React$Component);\n\n  function Text() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      wordsByLines: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"wordsWithWidth\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"spaceWidth\", 0);\n\n    return _this;\n  }\n\n  var _proto = Text.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updateWordsByLines(this.props, true);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // We calculated a new state, break out of the loop.\n    if (prevState.wordsByLines !== this.state.wordsByLines) {\n      return;\n    }\n\n    var needCalculate = prevProps.children !== this.props.children || prevProps.style !== this.props.style;\n    this.updateWordsByLines(this.props, needCalculate);\n  };\n\n  _proto.updateWordsByLines = function updateWordsByLines(props, needCalculate) {\n    if (needCalculate === void 0) {\n      needCalculate = false;\n    } // Only perform calculations if using features that require them (multiline, scaleToFit)\n\n\n    if (props.width || props.scaleToFit) {\n      if (needCalculate) {\n        var words = props.children ? props.children.toString().split(/(?:(?!\\u00A0+)\\s+)/) : [];\n        this.wordsWithWidth = words.map(function (word) {\n          return {\n            word: word,\n            width: getStringWidth(word, props.style) || 0\n          };\n        });\n        this.spaceWidth = getStringWidth(\"\\xA0\", props.style) || 0;\n      }\n\n      var wordsByLines = this.calculateWordsByLines(this.wordsWithWidth, this.spaceWidth, props.width);\n      this.setState({\n        wordsByLines: wordsByLines\n      });\n    } else {\n      this.updateWordsWithoutCalculate(props);\n    }\n  };\n\n  _proto.updateWordsWithoutCalculate = function updateWordsWithoutCalculate(props) {\n    var words = props.children ? props.children.toString().split(/(?:(?!\\u00A0+)\\s+)/) : [];\n    this.setState({\n      wordsByLines: [{\n        words: words\n      }]\n    });\n  };\n\n  _proto.calculateWordsByLines = function calculateWordsByLines(wordsWithWidth, spaceWidth, lineWidth) {\n    var scaleToFit = this.props.scaleToFit;\n    return wordsWithWidth.reduce(function (result, _ref) {\n      var word = _ref.word,\n          width = _ref.width;\n      var currentLine = result[result.length - 1];\n\n      if (currentLine && (lineWidth == null || scaleToFit || (currentLine.width || 0) + width + spaceWidth < lineWidth)) {\n        // Word can be added to an existing line\n        currentLine.words.push(word);\n        currentLine.width = currentLine.width || 0;\n        currentLine.width += width + spaceWidth;\n      } else {\n        // Add first word to line or word is too long to scaleToFit on existing line\n        var newLine = {\n          words: [word],\n          width: width\n        };\n        result.push(newLine);\n      }\n\n      return result;\n    }, []);\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        dx = _this$props.dx,\n        dy = _this$props.dy,\n        textAnchor = _this$props.textAnchor,\n        verticalAnchor = _this$props.verticalAnchor,\n        scaleToFit = _this$props.scaleToFit,\n        angle = _this$props.angle,\n        lineHeight = _this$props.lineHeight,\n        capHeight = _this$props.capHeight,\n        innerRef = _this$props.innerRef,\n        width = _this$props.width,\n        textProps = _objectWithoutPropertiesLoose(_this$props, [\"dx\", \"dy\", \"textAnchor\", \"verticalAnchor\", \"scaleToFit\", \"angle\", \"lineHeight\", \"capHeight\", \"innerRef\", \"width\"]);\n\n    var wordsByLines = this.state.wordsByLines;\n    var x = textProps.x,\n        y = textProps.y;\n    var startDy;\n\n    if (verticalAnchor === 'start') {\n      startDy = reduceCSSCalc(\"calc(\" + capHeight + \")\");\n    } else if (verticalAnchor === 'middle') {\n      startDy = reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) / 2 + \" * -\" + lineHeight + \" + (\" + capHeight + \" / 2))\");\n    } else {\n      startDy = reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) + \" * -\" + lineHeight + \")\");\n    }\n\n    var transform;\n    var transforms = [];\n\n    if (isNumber(x) && isNumber(y) && isNumber(width) && scaleToFit && wordsByLines.length > 0) {\n      var lineWidth = wordsByLines[0].width || 1;\n      var sx = width / lineWidth;\n      var sy = sx;\n      var originX = x - sx * x;\n      var originY = y - sy * y;\n      transforms.push(\"matrix(\" + sx + \", 0, 0, \" + sy + \", \" + originX + \", \" + originY + \")\");\n    }\n\n    if (angle) {\n      transforms.push(\"rotate(\" + angle + \", \" + x + \", \" + y + \")\");\n    }\n\n    if (transforms.length > 0) {\n      transform = transforms.join(' ');\n    }\n\n    return React.createElement(\"svg\", {\n      ref: innerRef,\n      x: dx,\n      y: dy,\n      fontSize: textProps.fontSize,\n      style: SVG_STYLE\n    }, React.createElement(\"text\", _extends({\n      transform: transform\n    }, textProps, {\n      textAnchor: textAnchor\n    }), wordsByLines.map(function (line, index) {\n      return React.createElement(\"tspan\", {\n        key: index,\n        x: x,\n        dy: index === 0 ? startDy : lineHeight\n      }, line.words.join(' '));\n    })));\n  };\n\n  return Text;\n}(React.Component);\n\n_defineProperty(Text, \"propTypes\", {\n  className: _pt.string,\n  scaleToFit: _pt.bool,\n  angle: _pt.number,\n  textAnchor: _pt.oneOf(['start', 'middle', 'end', 'inherit']),\n  verticalAnchor: _pt.oneOf(['start', 'middle', 'end']),\n  innerRef: _pt.oneOfType([_pt.string, _pt.func, _pt.object]),\n  width: _pt.number,\n  children: _pt.oneOfType([_pt.string, _pt.number])\n});\n\n_defineProperty(Text, \"defaultProps\", {\n  x: 0,\n  y: 0,\n  dx: 0,\n  dy: 0,\n  lineHeight: '1em',\n  capHeight: '0.71em',\n  // Magic number from d3\n  scaleToFit: false,\n  textAnchor: 'start',\n  verticalAnchor: 'end' // default SVG behavior\n\n});\n\nexport default Text;","map":{"version":3,"sources":["/Users/qorka/Projects/covid/ui/node_modules/@vx/text/esm/Text.js"],"names":["_pt","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","create","constructor","__proto__","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","React","reduceCSSCalc","getStringWidth","SVG_STYLE","overflow","isNumber","val","Text","_React$Component","_this","_len","args","Array","_key","concat","wordsByLines","_proto","componentDidMount","updateWordsByLines","props","componentDidUpdate","prevProps","prevState","state","needCalculate","children","style","width","scaleToFit","words","toString","split","wordsWithWidth","map","word","spaceWidth","calculateWordsByLines","setState","updateWordsWithoutCalculate","lineWidth","reduce","result","_ref","currentLine","push","newLine","render","_this$props","dx","dy","textAnchor","verticalAnchor","angle","lineHeight","capHeight","innerRef","textProps","x","y","startDy","transform","transforms","sx","sy","originX","originY","join","createElement","ref","fontSize","line","index","Component","className","string","bool","number","oneOf","oneOfType","func","object"],"mappings":"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","sourcesContent":["import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport reduceCSSCalc from 'reduce-css-calc';\nimport getStringWidth from './util/getStringWidth';\nvar SVG_STYLE = {\n  overflow: 'visible'\n};\n\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\nvar Text =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inheritsLoose(Text, _React$Component);\n\n  function Text() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      wordsByLines: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"wordsWithWidth\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"spaceWidth\", 0);\n\n    return _this;\n  }\n\n  var _proto = Text.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.updateWordsByLines(this.props, true);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    // We calculated a new state, break out of the loop.\n    if (prevState.wordsByLines !== this.state.wordsByLines) {\n      return;\n    }\n\n    var needCalculate = prevProps.children !== this.props.children || prevProps.style !== this.props.style;\n    this.updateWordsByLines(this.props, needCalculate);\n  };\n\n  _proto.updateWordsByLines = function updateWordsByLines(props, needCalculate) {\n    if (needCalculate === void 0) {\n      needCalculate = false;\n    }\n\n    // Only perform calculations if using features that require them (multiline, scaleToFit)\n    if (props.width || props.scaleToFit) {\n      if (needCalculate) {\n        var words = props.children ? props.children.toString().split(/(?:(?!\\u00A0+)\\s+)/) : [];\n        this.wordsWithWidth = words.map(function (word) {\n          return {\n            word: word,\n            width: getStringWidth(word, props.style) || 0\n          };\n        });\n        this.spaceWidth = getStringWidth(\"\\xA0\", props.style) || 0;\n      }\n\n      var wordsByLines = this.calculateWordsByLines(this.wordsWithWidth, this.spaceWidth, props.width);\n      this.setState({\n        wordsByLines: wordsByLines\n      });\n    } else {\n      this.updateWordsWithoutCalculate(props);\n    }\n  };\n\n  _proto.updateWordsWithoutCalculate = function updateWordsWithoutCalculate(props) {\n    var words = props.children ? props.children.toString().split(/(?:(?!\\u00A0+)\\s+)/) : [];\n    this.setState({\n      wordsByLines: [{\n        words: words\n      }]\n    });\n  };\n\n  _proto.calculateWordsByLines = function calculateWordsByLines(wordsWithWidth, spaceWidth, lineWidth) {\n    var scaleToFit = this.props.scaleToFit;\n    return wordsWithWidth.reduce(function (result, _ref) {\n      var word = _ref.word,\n          width = _ref.width;\n      var currentLine = result[result.length - 1];\n\n      if (currentLine && (lineWidth == null || scaleToFit || (currentLine.width || 0) + width + spaceWidth < lineWidth)) {\n        // Word can be added to an existing line\n        currentLine.words.push(word);\n        currentLine.width = currentLine.width || 0;\n        currentLine.width += width + spaceWidth;\n      } else {\n        // Add first word to line or word is too long to scaleToFit on existing line\n        var newLine = {\n          words: [word],\n          width: width\n        };\n        result.push(newLine);\n      }\n\n      return result;\n    }, []);\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        dx = _this$props.dx,\n        dy = _this$props.dy,\n        textAnchor = _this$props.textAnchor,\n        verticalAnchor = _this$props.verticalAnchor,\n        scaleToFit = _this$props.scaleToFit,\n        angle = _this$props.angle,\n        lineHeight = _this$props.lineHeight,\n        capHeight = _this$props.capHeight,\n        innerRef = _this$props.innerRef,\n        width = _this$props.width,\n        textProps = _objectWithoutPropertiesLoose(_this$props, [\"dx\", \"dy\", \"textAnchor\", \"verticalAnchor\", \"scaleToFit\", \"angle\", \"lineHeight\", \"capHeight\", \"innerRef\", \"width\"]);\n\n    var wordsByLines = this.state.wordsByLines;\n    var x = textProps.x,\n        y = textProps.y;\n    var startDy;\n\n    if (verticalAnchor === 'start') {\n      startDy = reduceCSSCalc(\"calc(\" + capHeight + \")\");\n    } else if (verticalAnchor === 'middle') {\n      startDy = reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) / 2 + \" * -\" + lineHeight + \" + (\" + capHeight + \" / 2))\");\n    } else {\n      startDy = reduceCSSCalc(\"calc(\" + (wordsByLines.length - 1) + \" * -\" + lineHeight + \")\");\n    }\n\n    var transform;\n    var transforms = [];\n\n    if (isNumber(x) && isNumber(y) && isNumber(width) && scaleToFit && wordsByLines.length > 0) {\n      var lineWidth = wordsByLines[0].width || 1;\n      var sx = width / lineWidth;\n      var sy = sx;\n      var originX = x - sx * x;\n      var originY = y - sy * y;\n      transforms.push(\"matrix(\" + sx + \", 0, 0, \" + sy + \", \" + originX + \", \" + originY + \")\");\n    }\n\n    if (angle) {\n      transforms.push(\"rotate(\" + angle + \", \" + x + \", \" + y + \")\");\n    }\n\n    if (transforms.length > 0) {\n      transform = transforms.join(' ');\n    }\n\n    return React.createElement(\"svg\", {\n      ref: innerRef,\n      x: dx,\n      y: dy,\n      fontSize: textProps.fontSize,\n      style: SVG_STYLE\n    }, React.createElement(\"text\", _extends({\n      transform: transform\n    }, textProps, {\n      textAnchor: textAnchor\n    }), wordsByLines.map(function (line, index) {\n      return React.createElement(\"tspan\", {\n        key: index,\n        x: x,\n        dy: index === 0 ? startDy : lineHeight\n      }, line.words.join(' '));\n    })));\n  };\n\n  return Text;\n}(React.Component);\n\n_defineProperty(Text, \"propTypes\", {\n  className: _pt.string,\n  scaleToFit: _pt.bool,\n  angle: _pt.number,\n  textAnchor: _pt.oneOf(['start', 'middle', 'end', 'inherit']),\n  verticalAnchor: _pt.oneOf(['start', 'middle', 'end']),\n  innerRef: _pt.oneOfType([_pt.string, _pt.func, _pt.object]),\n  width: _pt.number,\n  children: _pt.oneOfType([_pt.string, _pt.number])\n});\n\n_defineProperty(Text, \"defaultProps\", {\n  x: 0,\n  y: 0,\n  dx: 0,\n  dy: 0,\n  lineHeight: '1em',\n  capHeight: '0.71em',\n  // Magic number from d3\n  scaleToFit: false,\n  textAnchor: 'start',\n  verticalAnchor: 'end' // default SVG behavior\n\n});\n\nexport default Text;"]},"metadata":{},"sourceType":"module"}