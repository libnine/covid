{"ast":null,"code":"var _jsxFileName = \"/Users/qorka/Projects/covid/ui/src/components/compb.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Group } from '@vx/group';\nimport { scaleTime, scaleLinear } from '@vx/scale';\nimport { AreaClosed } from '@vx/shape';\nimport { AxisLeft, AxisBottom } from '@vx/axis';\nimport { LinearGradient } from '@vx/gradient';\nimport { extent, max } from 'd3-array';\n\nfunction Compb() {\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    (async () => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/boro.csv');\n      let res = await a.data;\n      console.log(res); // let data = Object.keys(res).map((key) => {\n      //   return {\n      //     date: key,\n      //     close: res[key]\n      //   }\n      // })\n\n      setData(data);\n    })();\n  }, []);\n  const width = 750;\n  const height = 400;\n\n  const x = d => new Date(d.date);\n\n  const y = d => d.close;\n\n  const margin = {\n    top: 60,\n    bottom: 60,\n    left: 80,\n    right: 80\n  };\n  const xMax = width - margin.left - margin.right;\n  const yMax = height - margin.top - margin.bottom;\n  const xScale = scaleTime({\n    range: [0, xMax],\n    domain: extent(data, x)\n  });\n  const yScale = scaleLinear({\n    range: [yMax, 0],\n    domain: [0, max(data, y)]\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GradientTealBlue, {\n    id: \"teal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    fill: \"url(#teal)\",\n    rx: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Group, {\n    top: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, data.map((d, i) => {\n    const letter = x(d);\n    const barWidth = xScale.bandwidth();\n    const barHeight = yMax - yScale(y(d));\n    const barX = xScale(letter);\n    const barY = yMax - barHeight;\n    return /*#__PURE__*/React.createElement(Bar, {\n      key: `bar-${letter}`,\n      x: barX,\n      y: barY,\n      width: barWidth,\n      height: barHeight,\n      fill: \"rgba(23, 233, 217, .5)\",\n      onClick: event => {\n        alert(`clicked: ${JSON.stringify(Object.values(d))}`);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 15\n      }\n    });\n  }))));\n}\n\nexport default Compb;","map":{"version":3,"sources":["/Users/qorka/Projects/covid/ui/src/components/compb.js"],"names":["React","useEffect","useState","axios","Group","scaleTime","scaleLinear","AreaClosed","AxisLeft","AxisBottom","LinearGradient","extent","max","Compb","data","setData","a","get","res","console","log","width","height","x","d","Date","date","y","close","margin","top","bottom","left","right","xMax","yMax","xScale","range","domain","yScale","map","i","letter","barWidth","bandwidth","barHeight","barX","barY","event","alert","JSON","stringify","Object","values"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,WAAtB;AACA,SAASC,SAAT,EAAoBC,WAApB,QAAuC,WAAvC;AACA,SAASC,UAAT,QAA2B,WAA3B;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,UAArC;AACA,SAASC,cAAT,QAA+B,cAA/B;AACA,SAASC,MAAT,EAAiBC,GAAjB,QAA4B,UAA5B;;AAEA,SAASC,KAAT,GAAiB;AACf,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,EAAD,CAAhC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAW;AACV,UAAIe,CAAC,GAAG,MAAMb,KAAK,CAACc,GAAN,CAAU,8EAAV,CAAd;AACA,UAAIC,GAAG,GAAG,MAAMF,CAAC,CAACF,IAAlB;AAEAK,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAJU,CAMV;AACA;AACA;AACA;AACA;AACA;;AAEAH,MAAAA,OAAO,CAACD,IAAD,CAAP;AACD,KAdD;AAeD,GAhBQ,EAgBN,EAhBM,CAAT;AAkBA,QAAMO,KAAK,GAAG,GAAd;AACA,QAAMC,MAAM,GAAG,GAAf;;AAEA,QAAMC,CAAC,GAAGC,CAAC,IAAI,IAAIC,IAAJ,CAASD,CAAC,CAACE,IAAX,CAAf;;AACA,QAAMC,CAAC,GAAGH,CAAC,IAAIA,CAAC,CAACI,KAAjB;;AAEA,QAAMC,MAAM,GAAG;AACbC,IAAAA,GAAG,EAAE,EADQ;AAEbC,IAAAA,MAAM,EAAE,EAFK;AAGbC,IAAAA,IAAI,EAAE,EAHO;AAIbC,IAAAA,KAAK,EAAE;AAJM,GAAf;AAOA,QAAMC,IAAI,GAAGb,KAAK,GAAGQ,MAAM,CAACG,IAAf,GAAsBH,MAAM,CAACI,KAA1C;AACA,QAAME,IAAI,GAAGb,MAAM,GAAGO,MAAM,CAACC,GAAhB,GAAsBD,MAAM,CAACE,MAA1C;AAEA,QAAMK,MAAM,GAAG/B,SAAS,CAAC;AACvBgC,IAAAA,KAAK,EAAE,CAAC,CAAD,EAAIH,IAAJ,CADgB;AAEvBI,IAAAA,MAAM,EAAE3B,MAAM,CAACG,IAAD,EAAOS,CAAP;AAFS,GAAD,CAAxB;AAKA,QAAMgB,MAAM,GAAGjC,WAAW,CAAC;AACzB+B,IAAAA,KAAK,EAAE,CAACF,IAAD,EAAO,CAAP,CADkB;AAEzBG,IAAAA,MAAM,EAAE,CAAC,CAAD,EAAI1B,GAAG,CAACE,IAAD,EAAOa,CAAP,CAAP;AAFiB,GAAD,CAA1B;AAKA,sBACE,uDACM;AAAK,IAAA,KAAK,EAAEN,KAAZ;AAAmB,IAAA,MAAM,EAAEC,MAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACF,oBAAC,gBAAD;AAAkB,IAAA,EAAE,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADE,eAEF;AAAM,IAAA,KAAK,EAAED,KAAb;AAAoB,IAAA,MAAM,EAAEC,MAA5B;AAAoC,IAAA,IAAI,EAAE,YAA1C;AAAwD,IAAA,EAAE,EAAE,EAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFE,eAGF,oBAAC,KAAD;AAAO,IAAA,GAAG,EAAE,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,IAAI,CAAC0B,GAAL,CAAS,CAAChB,CAAD,EAAIiB,CAAJ,KAAU;AAClB,UAAMC,MAAM,GAAGnB,CAAC,CAACC,CAAD,CAAhB;AACA,UAAMmB,QAAQ,GAAGP,MAAM,CAACQ,SAAP,EAAjB;AACA,UAAMC,SAAS,GAAGV,IAAI,GAAGI,MAAM,CAACZ,CAAC,CAACH,CAAD,CAAF,CAA/B;AACA,UAAMsB,IAAI,GAAGV,MAAM,CAACM,MAAD,CAAnB;AACA,UAAMK,IAAI,GAAGZ,IAAI,GAAGU,SAApB;AACA,wBACE,oBAAC,GAAD;AACE,MAAA,GAAG,EAAG,OAAMH,MAAO,EADrB;AAEE,MAAA,CAAC,EAAEI,IAFL;AAGE,MAAA,CAAC,EAAEC,IAHL;AAIE,MAAA,KAAK,EAAEJ,QAJT;AAKE,MAAA,MAAM,EAAEE,SALV;AAME,MAAA,IAAI,EAAC,wBANP;AAOE,MAAA,OAAO,EAAEG,KAAK,IAAI;AAChBC,QAAAA,KAAK,CAAE,YAAWC,IAAI,CAACC,SAAL,CAAeC,MAAM,CAACC,MAAP,CAAc7B,CAAd,CAAf,CAAiC,EAA9C,CAAL;AACD,OATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAaD,GAnBA,CADH,CAHE,CADN,CADF;AA8BD;;AAED,eAAeX,KAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Group } from '@vx/group'\nimport { scaleTime, scaleLinear } from '@vx/scale'\nimport { AreaClosed } from '@vx/shape'\nimport { AxisLeft, AxisBottom } from '@vx/axis'\nimport { LinearGradient } from '@vx/gradient'\nimport { extent, max } from 'd3-array'\n\nfunction Compb() {\n  const [data, setData] = useState([])\n\n  useEffect(() => {\n    (async() => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/boro.csv')\n      let res = await a.data\n\n      console.log(res)\n  \n      // let data = Object.keys(res).map((key) => {\n      //   return {\n      //     date: key,\n      //     close: res[key]\n      //   }\n      // })\n\n      setData(data)\n    })()\n  }, [])\n  \n  const width = 750\n  const height = 400\n\n  const x = d => new Date(d.date)\n  const y = d => d.close\n\n  const margin = {\n    top: 60,\n    bottom: 60,\n    left: 80,\n    right: 80,\n  }\n\n  const xMax = width - margin.left - margin.right\n  const yMax = height - margin.top - margin.bottom\n\n  const xScale = scaleTime({\n    range: [0, xMax],\n    domain: extent(data, x)\n  })\n\n  const yScale = scaleLinear({\n    range: [yMax, 0],\n    domain: [0, max(data, y)],\n  })\n\n  return (\n    <>\n          <svg width={width} height={height}>\n        <GradientTealBlue id=\"teal\" />\n        <rect width={width} height={height} fill={\"url(#teal)\"} rx={14} />\n        <Group top={40}>\n          {data.map((d, i) => {\n            const letter = x(d);\n            const barWidth = xScale.bandwidth();\n            const barHeight = yMax - yScale(y(d));\n            const barX = xScale(letter);\n            const barY = yMax - barHeight;\n            return (\n              <Bar\n                key={`bar-${letter}`}\n                x={barX}\n                y={barY}\n                width={barWidth}\n                height={barHeight}\n                fill=\"rgba(23, 233, 217, .5)\"\n                onClick={event => {\n                  alert(`clicked: ${JSON.stringify(Object.values(d))}`);\n                }}\n              />\n            );\n          })}\n        </Group>\n      </svg>\n    </>\n  )\n}\n\nexport default Compb\n"]},"metadata":{},"sourceType":"module"}