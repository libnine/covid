{"ast":null,"code":"var _jsxFileName = \"/Users/qorka/Projects/covid/ui/src/components/compc.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Group } from '@vx/group';\nimport { Pie } from '@vx/shape';\nimport { LinearGradient } from '@vx/gradient';\n\nfunction Compc() {\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    (async () => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/by-age.csv');\n      let res = await a.data;\n      let dump = [],\n          lines = res.split('\\r'),\n          headers = lines[0].split(',');\n\n      for (let i = 1; i < lines.length; i++) {\n        let obj = {},\n            line = lines[i].replace('\\n', ''),\n            curLine = line.split(',');\n\n        if (curLine[0].match(/Citywide\\s\\S+/gi)) {\n          continue;\n        }\n\n        for (var j = 0; j < headers.length; j++) {\n          obj[headers[j].toLowerCase()] = curLine[j].replace(/[\\sA-Za-z]/gi, '');\n        }\n\n        dump.push(obj);\n      }\n\n      setData(dump);\n    })();\n  }, []);\n  const height = 400,\n        width = 600,\n        radius = Math.min(width, height) - 100;\n\n  function Label({\n    x,\n    y,\n    children\n  }) {\n    if (children === \"75\") {\n      children = \"75+\";\n    }\n\n    return /*#__PURE__*/React.createElement(\"text\", {\n      fontFamily: \"Snoopy\",\n      fill: \"white\",\n      textAnchor: \"middle\",\n      x: x,\n      y: y,\n      dy: \".25em\",\n      fontSize: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 7\n      }\n    }, Math.abs(x) < 10 ? null : children);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"svg\", {\n    width: width,\n    height: height,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LinearGradient, {\n    from: \"#b39cea\",\n    to: \"#e99cea\",\n    id: \"gradient\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    width: width,\n    height: height,\n    fill: \"#fbc2eb\",\n    rx: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Group, {\n    top: height / 2,\n    left: width / 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Pie, {\n    fill: `#000000`,\n    centroid: (centroid, arc) => {\n      const [x, y] = centroid;\n      return /*#__PURE__*/React.createElement(Label, {\n        x: x,\n        y: y,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      }, arc.data.age_group);\n    },\n    data: data,\n    outerRadius: radius - 125,\n    pieValue: d => d.death_rate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default Compc;","map":{"version":3,"sources":["/Users/qorka/Projects/covid/ui/src/components/compc.js"],"names":["React","useEffect","useState","axios","Group","Pie","LinearGradient","Compc","data","setData","a","get","res","dump","lines","split","headers","i","length","obj","line","replace","curLine","match","j","toLowerCase","push","height","width","radius","Math","min","Label","x","y","children","abs","centroid","arc","age_group","d","death_rate"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { Group } from '@vx/group'\nimport { Pie } from '@vx/shape'\nimport { LinearGradient } from '@vx/gradient'\n\nfunction Compc() {\n  const [data, setData] = useState([])\n\n  useEffect(() => {\n    (async() => {\n      let a = await axios.get('https://raw.githubusercontent.com/nychealth/coronavirus-data/master/by-age.csv')\n      let res = await a.data\n\n      let \n        dump = [],\n        lines = res.split('\\r'),\n        headers = lines[0].split(',')\n    \n      for (let i = 1; i < lines.length; i++) {\n        let \n          obj = {},\n          line = lines[i].replace('\\n', ''),\n          curLine = line.split(',')\n\n        if (curLine[0].match(/Citywide\\s\\S+/gi)) { continue }\n    \n        for (var j = 0; j < headers.length; j++) {\n          obj[headers[j].toLowerCase()] = curLine[j].replace(/[\\sA-Za-z]/gi, '')\n        }\n    \n        dump.push(obj)\n      }\n\n      setData(dump)\n    })()\n  }, [])\n\n  const \n    height = 400,\n    width = 600,\n    radius = Math.min(width, height) - 100\n\n  function Label({ x, y, children }) {\n    if (children === \"75\") { children = \"75+\" }\n    \n    return (\n      <text\n        fontFamily={\"Snoopy\"}\n        fill=\"white\"\n        textAnchor=\"middle\"\n        x={x}\n        y={y}\n        dy=\".25em\"\n        fontSize={16}\n      >\n        {Math.abs(x) < 10 ? null : children}\n      </text>\n    )\n  }\n\n  return (\n    <>\n      <svg width={width} height={height}>\n        <LinearGradient \n          from=\"#b39cea\" \n          to=\"#e99cea\" \n          id=\"gradient\"/>\n        <rect width={width} height={height} fill=\"#fbc2eb\" rx={14} />\n        <Group top={height / 2} left={width / 2}>\n          <Pie\n            fill={`#000000`}\n            centroid={(centroid, arc) => {\n              const [x, y] = centroid\n              return (\n                <Label x={x} y={y}>\n                  {arc.data.age_group}\n                </Label>\n              )\n            }}\n            data={data}\n            outerRadius={radius - 125}\n            pieValue={d => d.death_rate}\n          />\n        </Group>\n      </svg>\n    </>\n  )\n}\n\nexport default Compc\n"]},"metadata":{},"sourceType":"module"}